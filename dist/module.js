define(["app/plugins/sdk","jquery","lodash","app/core/app_events","moment"],function(e,t,n,r,i){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PanelCtrl=t.AjaxCtrl=t.RenderMode=t.DSInfo=void 0;var r=n(1),i=l(n(2)),s=l(n(3)),a=l(n(4)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}n(6);var p=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e){this.isProxy=!1,this.withCredentials=!1,this.name=e.name,e.url?this.baseURL=e.url:e.urls&&(this.baseURL=e.urls[0]),this.isProxy=this.baseURL.startsWith("/api/"),this.withCredentials=e.withCredentials,this.basicAuth=e.basicAuth};t.DSInfo=u;var h=t.RenderMode=void 0;!function(e){e.html="html",e.text="text",e.pre="pre",e.image="image",e.json="json",e.template="template"}(h||(t.RenderMode=h={}));var c=function(e){function t(n,r,i,a,o,l,p,u,h,c,d){var f=e.call(this,n,r)||this;return f.$rootScope=i,f.$q=a,f.$timeout=o,f.$http=l,f.$sce=p,f.templateSrv=u,f.datasourceSrv=h,f.backendSrv=c,f.$compile=d,f.isIframe=!1,f.objectURL=null,f.scopedVars=null,f.requestCount=0,f.lastRequestTime=-1,s.default.defaults(f.panel,t.examples[0].config),n.$on("$destroy",function(){f.objectURL&&URL.revokeObjectURL(f.objectURL)}),f.events.on("init-edit-mode",f.onInitEditMode.bind(f)),f.events.on("panel-initialized",f.onPanelInitalized.bind(f)),f.events.on("render",f.notifyWhenRenderingCompleted.bind(f)),f}return p(t,e),t.$inject=["$scope","$injector","$rootScope","$q","$timeout","$http","$sce","templateSrv","datasourceSrv","backendSrv","$compile"],t.prototype.notifyWhenRenderingCompleted=function(){var e=this;if(this.timer&&this.$timeout.cancel(this.timer),this.requestCount>0){var t=this.requestCount;this.timer=this.$timeout(function(){e.timer=void 0,e.requestCount==t&&(e.loading?e.notifyWhenRenderingCompleted():e.renderingCompleted())},100)}},t.prototype.getStaticExamples=function(){return t.examples},t.prototype.loadExample=function(e,n){var r=this;n&&(n.stopPropagation(),n.preventDefault()),console.log("Loading example",e);var o=t.examples[0].config;s.default.forEach(s.default.keys(o),function(e){delete r.panel[e]}),s.default.defaults(this.panel,e.config),s.default.defaults(this.panel,o),(0,i.default)(window).scrollTop(0),a.default.emit("dash-scroll",{animate:!1,evt:0}),this.$rootScope.appEvent("alert-success",["Loaded Example Configuraiton",e.name]),e.editorTabIndex?this.editorTabIndex=e.editorTabIndex:this.editorTabIndex=1,this.$scope.response=null,this.updateFN(),this.updateTemplate(),this.datasourceChanged(null),this.refresh()},t.prototype.getCurrentParams=function(e){var t={};return this.params_fn&&(t=this.params_fn(this)),t},t.prototype.template=function(e){return e?this.templateSrv.replace(e,this.scopedVars):null},t.prototype.getHeaders=function(e){return this.header_fn?this.header_fn(this):null},t.prototype.getData=function(e){return this.data_fn?this.data_fn(this):null},t.prototype._getURL=function(e){var t=this.templateSrv.replace(this.panel.url,e),n=this.getCurrentParams();if(n){var r=i.default.param(n);r&&(t=t+(t.indexOf("?")>0?"&":"?")+r)}return this.dsInfo?this.dsInfo.baseURL+t:t},t.prototype.updateTimeRange=function(t){var n=this.timeInfo;e.prototype.updateTimeRange.call(this),this.panel.showTime&&n&&(this.timeInfo=n)},t.prototype.issueQueries=function(e){var t=this;if(this.fn_error)return this.loading=!1,this.error=this.fn_error,null;var n=this.scopedVars=Object.assign({},this.panel.scopedVars,{__interval:{text:this.interval,value:this.interval},__interval_ms:{text:this.intervalMs,value:this.intervalMs}});this.debugParams&&(this.debugParams={},s.default.each(n,function(e,n){t.debugParams[n]=e.text}),s.default.each(this.templateSrv.variables,function(e){t.debugParams[e.name]=e.getValueForUrl()}));var r=this._getURL(n);if(this.panel.skipSameURL&&r===this.lastURL)return this.loading=!1,null;this.lastURL=r,this.error=null;var i=Date.now();if(this.isIframe)return this.$scope.url=this.$sce.trustAsResourceUrl(r),void(this.objectURL&&(this.img.css("display","none"),URL.revokeObjectURL(this.objectURL),this.objectURL=null));var a=this.templateSrv.replace(this.panel.url,n),o=this.getCurrentParams(),l={method:this.panel.method,responseType:this.panel.responseType,url:a,params:o,headers:this.getHeaders(),data:this.getData(),cache:!1,withCredentials:this.panel.withCredentials};if(l.headers=l.headers||{},this.dsInfo)(this.dsInfo.basicAuth||this.dsInfo.withCredentials)&&(l.withCredentials=!0),this.dsInfo.basicAuth&&(l.headers.Authorization=this.dsInfo.basicAuth),l.url=this.dsInfo.baseURL+a;else{if(!l.url)return this.error="Missing URL",void this.showError(this.error,null);if(l.url.indexOf("://")<0&&l.url.indexOf("api/")<0)return this.error="Invalid URL: "+l.url,void this.showError(this.error,o)}return this.requestCount++,this.loading=!0,this.backendSrv.datasourceRequest(l).then(function(e){t.lastRequestTime=i,t.process(e),t.loading=!1},function(e){console.log("ERR",e),t.lastRequestTime=i,t.loading=!1,t.error=e,t.inspector={error:e},t.showError("Request Error",e)}),null},t.prototype.handleQueryResult=function(e){this.render()},t.prototype.onPanelInitalized=function(){var e=this;this.updateFN(),this.updateTemplate(),this.datasourceChanged(null),(0,i.default)(window).on("resize",s.default.debounce(function(t){e.refresh()},150))},t.prototype.onConfigChanged=function(){this.lastURL=void 0,this.refresh()},t.prototype.onInitEditMode=function(){this.debugParams={},this.editorTabs.splice(1,1),this.addEditorTab("Request","public/plugins/"+this.pluginId+"/partials/editor.request.html",1),this.addEditorTab("Display","public/plugins/"+this.pluginId+"/partials/editor.display.html",2),this.addEditorTab("Examples","public/plugins/"+this.pluginId+"/partials/editor.examples.html",4),this.editorTabIndex=1,this.updateFN()},t.prototype.getDatasourceOptions=function(){return Promise.resolve(this.datasourceSrv.getMetricSources().map(function(e){return{value:e.value,text:e.name,datasource:e}}))},t.prototype.datasourceChanged=function(e){var t=this;e&&e.datasource&&this.setDatasource(e.datasource),this.panel.useDatasource?(this.panel.datasource||(this.panel.datasource="default"),this.datasourceSrv.get(this.panel.datasource).then(function(e){e&&(t.dsInfo=new u(e)),t.onConfigChanged()})):(this.dsInfo=void 0,this.onConfigChanged())},t.prototype.updateFN=function(){if(this.fn_error=null,this.params_fn=void 0,this.panel.params_js)try{this.params_fn=new Function("ctrl","return "+this.panel.params_js)}catch(e){console.warn("error parsing params_js",this.panel.params_js,e),this.params_fn=void 0,this.fn_error=e}if(this.panel.header_js)try{this.header_fn=new Function("ctrl","return "+this.panel.header_js)}catch(e){console.warn("error parsing header_js",this.panel.header_js,e),this.header_fn=void 0,this.fn_error=e}if(this.panel.data_js)try{this.data_fn=new Function("ctrl","return "+this.panel.data_js)}catch(e){console.warn("error parsing data_js",this.panel.data_js,e),this.data_fn=void 0,this.fn_error=e}this.onConfigChanged()},t.prototype.updateTemplate=function(){var e="";if(this.isIframe="iframe"===this.panel.method,this.panel.mode==h.template)this.panel.template||(this.panel.template="<pre>{{ response }}</pre>"),e=this.panel.template;else if(delete this.panel.template,this.isIframe)e='<iframe           frameborder="0"           width="100%"            height="{{ ctrl.height }}"           ng-src="{{ url }}"           ng-if="ctrl.panel.method === \'iframe\'"></iframe>';else switch(this.panel.mode||(this.panel.mode=h.html),this.panel.mode){case h.html:e='<div ng-bind-html="response"></div>';break;case h.text:e="{{ response }}";break;case h.pre:e="<pre>{{ response }}</pre>";break;case h.json:e='<json-tree root-name="sub" object="response" start-expanded="true"></json-tree>';break;case h.image:e="";break;default:console.warn("Unsupported render mode:",this.panel.mode)}this.ngtemplate.html(e),this.$compile(this.ngtemplate.contents())(this.$scope),this.$scope.response&&this.render()},t.prototype.showError=function(e,t){this.timeInfo=null,this.objectURL&&(this.img.css("display","none"),URL.revokeObjectURL(this.objectURL),this.objectURL=null);var n="<h1>"+e+"</h1>";t&&(n+="<pre>"+JSON.stringify(t)+"</pre>"),this.ngtemplate.html(n),this.$compile(this.ngtemplate.contents())(this.$scope),this.$scope.response&&this.render()},t.prototype.process=function(e){if(this.panel.showTime){var t=this.panel.showTimePrefix?this.panel.showTimePrefix:"";if(this.panel.showTimeValue){var n=void 0;if("request"===this.panel.showTimeValue)n=this.lastRequestTime;else if("recieve"===this.panel.showTimeValue)n=Date.now();else if(this.panel.showTimeValue.startsWith("header-")){var r=this.panel.showTimeValue.substring("header-".length),i=e.headers[r];if(i)console.log("TODO, parse header",i,r);else{var s={};for(var a in e.headers())s[a]=e.headers[a];console.log("Header:",r,"not found in:",s,e)}}t+=n?(0,o.default)(n).format(this.panel.showTimeFormat):"missing: "+this.panel.showTimeValue}this.timeInfo=t}else this.timeInfo=null;if(e){this.$scope.response=e.hasOwnProperty("data")?e.data:e;var l="";if(e.hasOwnProperty("headers")&&(l=e.headers("Content-Type")),l&&l.startsWith("image/")){var p=new Blob([e.data],{type:l}),u=this.objectURL;return this.objectURL=URL.createObjectURL(p),this.img.attr("src",this.objectURL),u&&URL.revokeObjectURL(u),this.img.css("display","block"),void(this.panel.mode!=h.image&&(this.panel.mode=h.image,this.updateTemplate()))}this.objectURL&&(this.img.css("display","none"),URL.revokeObjectURL(this.objectURL),this.objectURL=null),this.panel.mode==h.json&&this.updateTemplate()}},t.prototype.openFullscreen=function(){var e=this;this.overlay.find("img").attr("src",this.objectURL),(0,i.default)(".grafana-app").append(this.overlay),this.overlay.on("click",function(){e.overlay.remove()})},t.prototype.link=function(e,t,n,r){this.img=(0,i.default)(t.find("img")[0]),this.ngtemplate=(0,i.default)(t.find(".ngtemplate")[0]),this.overlay=(0,i.default)(t.find(".ajaxmodal")[0]),this.overlay.remove(),this.overlay.css("display","block"),this.img.css("display","none")},t.templateUrl="partials/module.html",t.scrollable=!0,t.examples=[{name:"Simple",text:"loads static content from github",config:{method:"GET",mode:h.html,template:"",url:"https://raw.githubusercontent.com/ryantxu/ajax-panel/master/static/example.txt",params_js:"{\n from:ctrl.range.from.format('x'),  // x is unix ms timestamp\n to:ctrl.range.to.format('x'), \n height:ctrl.height,\n now:Date.now(),\n interval: ctrl.template('$__interval'),\n sample: 'Not escaped: $__interval',\n since:ctrl.lastRequestTime\n}",header_js:"{}",data_js:"{}",responseType:"text",withCredentials:!1,skipSameURL:!0,showTime:!1,showTimePrefix:null,showTimeFormat:"LTS",showTimeValue:"request",templateResponse:!0}},{name:"Echo Service",text:"Responds with the request attributes",config:{method:"GET",mode:h.json,url:"https://httpbin.org/anything?templateInURL=$__interval",header_js:"{\n  Accept: 'text/plain'\n}",data_js:"{}",showTime:!0}},{name:"Echo Service with Template",text:"Format the response with an angular template",editorTabIndex:2,config:{method:"GET",mode:h.template,template:"<h5>Origin: {{ response.origin }}</h5>\n\n<pre>{{ response | json }}</pre>",url:"https://httpbin.org/anything?templateInURL=$__interval",header_js:"{\n  Accept: 'text/plain'\n}",data_js:"{}",showTime:!0}},{name:"Webcamera in Thailand",text:"Load an image dynamically",config:{method:"GET",url:"http://tat.touch-ics.com/CCTV/cam.php?cam=31&datatype=image&langISO=EN&t=current&reloadtime=1",params_js:"{\n __now:Date.now(),\n}",responseType:"arraybuffer",showTime:!0}},{name:"Image",text:'Sending "Accept" header',config:{method:"GET",url:"https://httpbin.org/image",params_js:"{}",header_js:"{\n  Accept: 'image/jpeg'\n}",data_js:"{}",responseType:"blob",showTime:!0,showTimeValue:"recieve"}},{name:"Image in IFrame",text:"load an image in an iframe",config:{method:"iframe",url:"https://dummyimage.com/600x300/4286f4/000&text=GRAFANA",params_js:"{}"}},{name:"Results from grafana api",text:"grafana settings api w/ template",config:{mode:h.template,template:"<h5>{{ response.DEFAULT.instance_name }}</h5>\n\n<pre>{{ response | json }}</pre>",url:"/api/admin/settings",params_js:"{}"}},{name:"Basic Auth (success)",text:"send correct basic auth",config:{url:"https://httpbin.org/basic-auth/user/pass",withCredentials:!0,params_js:"{}",header_js:"{\n   Authorization: 'Basic ' + btoa('user' + ':' + 'pass')\n// Authorization: 'Basic dXNlcjpwYXNz'\n}",data_js:"{}"}},{name:"Basic Auth (fail)",text:"send correct basic auth",config:{url:"https://httpbin.org/basic-auth/userx/passx",withCredentials:!0,params_js:"{}",header_js:"{\n Authorization: 'Basic ...bad..'\n}",data_js:"{}"}}],t}(r.MetricsPanelCtrl);t.AjaxCtrl=c,t.PanelCtrl=c},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t,n){var r=n(7);"string"==typeof r&&(r=[[e.i,r,""]]);n(9)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(8)(!0)).push([e.i,".small-link a {\n  text-decoration: none;\n  color: #33b5e5;\n}\n\n.small-link a:hover {\n  text-decoration: underline;\n}\n\n.small-link .label-tag {\n  background-color: rgb(117, 117, 117);\n  border-color: rgb(155, 155, 155);\n  margin-right: 5px;\n  cursor: context-menu;\n}\n\n.imgwrap img {\n  width: 100%;\n  height: 100%;\n}\n.imgwrap img:hover {\n  border: 3px solid #33b5e5;\n  cursor: pointer;\n}\n\n.center-popup {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1050;\n  cursor: pointer;\n}\n","",{version:3,sources:["/Users/daniel.nenkov/Projects/eeveebank/ajax-panel/src/style.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,eAAe;CAChB;;AAED;EACE,2BAA2B;CAC5B;;AAED;EACE,qCAAqC;EACrC,iCAAiC;EACjC,kBAAkB;EAClB,qBAAqB;CACtB;;AAED;EACE,YAAY;EACZ,aAAa;CACd;AACD;EACE,0BAA0B;EAC1B,gBAAgB;CACjB;;AAED;EACE,mBAAmB;EACnB,SAAS;EACT,UAAU;EACV,iCAAiC;EACjC,cAAc;EACd,gBAAgB;CACjB",file:"style.css",sourcesContent:[".small-link a {\n  text-decoration: none;\n  color: #33b5e5;\n}\n\n.small-link a:hover {\n  text-decoration: underline;\n}\n\n.small-link .label-tag {\n  background-color: rgb(117, 117, 117);\n  border-color: rgb(155, 155, 155);\n  margin-right: 5px;\n  cursor: context-menu;\n}\n\n.imgwrap img {\n  width: 100%;\n  height: 100%;\n}\n.imgwrap img:hover {\n  border: 3px solid #33b5e5;\n  cursor: pointer;\n}\n\n.center-popup {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1050;\n  cursor: pointer;\n}\n"],sourceRoot:""}])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),s=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(s).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var s=this[i][0];"number"==typeof s&&(r[s]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r={},i=function(e){var t;return function(){return void 0===t&&(t=function(){return window&&document&&document.all&&!window.atob}.apply(this,arguments)),t}}(),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),a=null,o=0,l=[],p=n(10);function u(e,t){for(var n=0;n<e.length;n++){var i=e[n],s=r[i.id];if(s){s.refs++;for(var a=0;a<s.parts.length;a++)s.parts[a](i.parts[a]);for(;a<i.parts.length;a++)s.parts.push(g(i.parts[a],t))}else{var o=[];for(a=0;a<i.parts.length;a++)o.push(g(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:o}}}}function h(e,t){for(var n=[],r={},i=0;i<e.length;i++){var s=e[i],a=t.base?s[0]+t.base:s[0],o={css:s[1],media:s[2],sourceMap:s[3]};r[a]?r[a].parts.push(o):n.push(r[a]={id:a,parts:[o]})}return n}function c(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function d(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function f(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),m(t,e.attrs),c(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function g(e,t){var n,r,i,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var l=o++;n=a||(a=f(t)),r=b.bind(null,n,l,!1),i=b.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),c(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,s=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||s)&&(r=p(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}.bind(null,n,t),i=function(){d(n),n.href&&URL.revokeObjectURL(n.href)}):(n=f(t),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){d(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return u(n,t),function(e){for(var i=[],s=0;s<n.length;s++){var a=n[s];(o=r[a.id]).refs--,i.push(o)}for(e&&u(h(e,t),t),s=0;s<i.length;s++){var o;if(0===(o=i[s]).refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete r[o.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function b(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var s=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,s=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(i=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:r+s.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}}])});
//# sourceMappingURL=module.js.map